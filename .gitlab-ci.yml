default:
  image: python:3.11-slim
  before_script:
    - echo "ğŸ§  Conscious Bridge CI/CD Starting..."
    - python --version
  after_script:
    - echo "ğŸ Pipeline completed at $(date)"
  retry: 2

stages:
  - validate
  - test
  - build
  - deploy

validate-structure:
  stage: validate
  script:
    - echo "Checking project structure..."
    - ls -la

run-tests:
  stage: test
  script:
    - echo "Running tests..."
    - 'echo "Project: Conscious Bridge Reloaded"'

docker-build:
  stage: build
  script:
    - echo "Building Docker image..."
  only:
    - main

deploy-gke:
  stage: deploy
  script:
    - echo "Deploying to GKE..."
    - echo "Command: kubectl apply -f k8s/"
  only:
    - main
  when: manual
