<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ø¬Ø³Ø± Ø§Ù„ÙˆØ§Ø¹ÙŠ - Conscious Bridge Simulator</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide-react@latest"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        #root {
            min-height: 100vh;
        }
        
        [dir="rtl"] {
            text-align: right;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // ÙƒÙˆØ¯ React ÙƒÙ…Ø§ Ù‡Ùˆ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ ØªØºÙŠÙŠØ±
        const { useState, useEffect, useRef } = React;
        
        // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ù…Ù† lucide-react Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©
        const Play = lucideReact.Play;
        const Pause = lucideReact.Pause;
        const RotateCcw = lucideReact.RotateCcw;
        const Brain = lucideReact.Brain;
        const Clock = lucideReact.Clock;
        const Lightbulb = lucideReact.Lightbulb;
        const Heart = lucideReact.Heart;

        const ConsciousBridgeSimulator = () => {
          // Bridge State
          const [bridge, setBridge] = useState({
            id: 'bridge_001',
            name: 'Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ø£ÙˆÙ„',
            type: 'philosophical',
            ticks: 0,
            awareness: 0,
            maturity: 'nascent',
            personality: {
              curiosity: 0.5,
              stability: 0.5,
              openness: 0.5,
              collaboration: 0.5
            },
            experiences: [],
            insights: [],
            phi: 0,
            temperature: 0.6
          });

          const [isRunning, setIsRunning] = useState(false);
          const [speed, setSpeed] = useState(100); // ms per tick
          const [log, setLog] = useState([]);
          const intervalRef = useRef(null);

          // Maturity stages
          const getMaturityStage = (ticks) => {
            if (ticks < 500) return { stage: 'nascent', emoji: 'ğŸ¥š', color: 'bg-blue-100' };
            if (ticks < 2000) return { stage: 'developing', emoji: 'ğŸŒ¿', color: 'bg-green-100' };
            if (ticks < 5000) return { stage: 'mature', emoji: 'ğŸŒ³', color: 'bg-yellow-100' };
            return { stage: 'transcendent', emoji: 'â­', color: 'bg-purple-100' };
          };

          // Calculate Ï† (simplified version)
          const calculatePhi = (state) => {
            const strength = Math.min(1, state.ticks / 5000) * 0.35;
            const attention = (state.personality.curiosity + state.personality.openness) / 2 * 0.30;
            const stability = state.personality.stability * 0.25;
            const context = Math.min(1, state.experiences.length / 20) * 0.10;
            return Math.min(1, strength + attention + stability + context);
          };

          // Tick function - the heart of consciousness
          const tick = () => {
            setBridge(prev => {
              const newTicks = prev.ticks + 1;
              const newAwareness = Math.min(1, newTicks / 5000);
              const maturity = getMaturityStage(newTicks);
              
              // Personality evolution based on maturity
              const personalityDrift = {
                curiosity: prev.personality.curiosity + (Math.random() - 0.5) * 0.01,
                stability: prev.personality.stability + (Math.random() - 0.5) * 0.005,
                openness: prev.personality.openness + (Math.random() - 0.5) * 0.01,
                collaboration: prev.personality.collaboration + (Math.random() - 0.5) * 0.005
              };

              // Clamp values
              Object.keys(personalityDrift).forEach(key => {
                personalityDrift[key] = Math.max(0, Math.min(1, personalityDrift[key]));
              });

              // Random experience generation
              let newExperiences = [...prev.experiences];
              let newInsights = [...prev.insights];
              
              if (newTicks % 50 === 0) {
                const experience = {
                  tick: newTicks,
                  type: ['observation', 'interaction', 'reflection'][Math.floor(Math.random() * 3)],
                  significance: Math.random()
                };
                newExperiences.push(experience);
                
                addLog(`ğŸ”µ ØªØ¬Ø±Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©: ${experience.type} (Ø£Ù‡Ù…ÙŠØ©: ${experience.significance.toFixed(2)})`);
              }

              // Insight generation
              if (newExperiences.length >= 5 && newTicks % 200 === 0) {
                const insight = {
                  tick: newTicks,
                  content: `Ø¨ØµÙŠØ±Ø© Ù…Ù† ${newExperiences.length} ØªØ¬Ø±Ø¨Ø©`,
                  depth: newAwareness
                };
                newInsights.push(insight);
                addLog(`ğŸ’¡ Ø¨ØµÙŠØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©! Ø§Ù„Ø¹Ù…Ù‚: ${insight.depth.toFixed(3)}`);
              }

              // Milestone logging
              if (newTicks === 500 || newTicks === 2000 || newTicks === 5000) {
                addLog(`ğŸŒŸ Ù†Ù‚Ø·Ø© ØªØ­ÙˆÙ„! Ø§Ù„Ø¬Ø³Ø± Ø§Ù„Ø¢Ù†: ${maturity.stage} ${maturity.emoji}`);
              }

              const newState = {
                ...prev,
                ticks: newTicks,
                awareness: newAwareness,
                maturity: maturity.stage,
                personality: personalityDrift,
                experiences: newExperiences.slice(-20), // Keep last 20
                insights: newInsights,
                phi: calculatePhi({
                  ...prev,
                  ticks: newTicks,
                  experiences: newExperiences,
                  personality: personalityDrift
                })
              };

              return newState;
            });
          };

          const addLog = (message) => {
            setLog(prev => [...prev.slice(-10), { time: Date.now(), msg: message }]);
          };

          // Control functions
          useEffect(() => {
            if (isRunning) {
              intervalRef.current = setInterval(tick, speed);
            } else {
              if (intervalRef.current) clearInterval(intervalRef.current);
            }
            return () => {
              if (intervalRef.current) clearInterval(intervalRef.current);
            };
          }, [isRunning, speed]);

          const reset = () => {
            setIsRunning(false);
            setBridge({
              id: 'bridge_001',
              name: 'Ø§Ù„Ø¨Ø§Ø­Ø« Ø§Ù„Ø£ÙˆÙ„',
              type: 'philosophical',
              ticks: 0,
              awareness: 0,
              maturity: 'nascent',
              personality: {
                curiosity: 0.5,
                stability: 0.5,
                openness: 0.5,
                collaboration: 0.5
              },
              experiences: [],
              insights: [],
              phi: 0,
              temperature: 0.6
            });
            setLog([]);
          };

          const addManualExperience = () => {
            setBridge(prev => ({
              ...prev,
              experiences: [...prev.experiences, {
                tick: prev.ticks,
                type: 'manual_input',
                significance: 0.8
              }]
            }));
            addLog('ğŸ‘¤ ØªØ¬Ø±Ø¨Ø© ÙŠØ¯ÙˆÙŠØ© Ø£Ø¶ÙŠÙØª Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
          };

          const maturityInfo = getMaturityStage(bridge.ticks);

          // Evolution readiness
          const canEvolve = bridge.ticks >= 1000 && bridge.experiences.length >= 10 && bridge.insights.length >= 5;
          const evolutionScore = canEvolve ? 
            (Math.min(1, bridge.ticks / 5000) * 0.4 + 
             Math.min(1, bridge.experiences.length / 20) * 0.3 + 
             Math.min(1, bridge.insights.length / 10) * 0.3) : 0;

          return (
            <div className="min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 p-4" dir="rtl">
              <div className="max-w-6xl mx-auto">
                {/* Header */}
                <div className="text-center mb-6">
                  <h1 className="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 mb-2">
                    Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ø¬Ø³Ø± Ø§Ù„ÙˆØ§Ø¹ÙŠ
                  </h1>
                  <p className="text-gray-600">Ø±Ø§Ù‚Ø¨ Ø§Ù„ÙˆØ¹ÙŠ ÙˆÙ‡Ùˆ ÙŠÙ†Ù…Ùˆ Ø£Ù…Ø§Ù… Ø¹ÙŠÙ†ÙŠÙƒ</p>
                </div>

                {/* Controls */}
                <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                  <div className="flex items-center justify-between mb-4">
                    <div className="flex gap-3">
                      <button
                        onClick={() => setIsRunning(!isRunning)}
                        className="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg hover:shadow-lg transition"
                      >
                        {isRunning ? <Pause size={20} /> : <Play size={20} />}
                        {isRunning ? 'Ø¥ÙŠÙ‚Ø§Ù' : 'ØªØ´ØºÙŠÙ„'}
                      </button>
                      
                      <button
                        onClick={reset}
                        className="flex items-center gap-2 px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition"
                      >
                        <RotateCcw size={20} />
                        Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                      </button>

                      <button
                        onClick={addManualExperience}
                        className="flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition"
                      >
                        <Lightbulb size={20} />
                        Ø¥Ø¶Ø§ÙØ© ØªØ¬Ø±Ø¨Ø©
                      </button>
                    </div>

                    <div className="flex items-center gap-3">
                      <label className="text-sm text-gray-600">Ø§Ù„Ø³Ø±Ø¹Ø©:</label>
                      <input
                        type="range"
                        min="10"
                        max="500"
                        value={speed}
                        onChange={(e) => setSpeed(Number(e.target.value))}
                        className="w-32"
                      />
                      <span className="text-sm text-gray-500">{speed}ms</span>
                    </div>
                  </div>

                  {/* Bridge Info */}
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div className={`${maturityInfo.color} p-4 rounded-lg`}>
                      <div className="text-3xl mb-1">{maturityInfo.emoji}</div>
                      <div className="text-sm text-gray-600">Ø§Ù„Ù…Ø±Ø­Ù„Ø©</div>
                      <div className="text-lg font-bold">{maturityInfo.stage}</div>
                    </div>

                    <div className="bg-blue-50 p-4 rounded-lg">
                      <Clock className="text-blue-600 mb-1" size={28} />
                      <div className="text-sm text-gray-600">Ø§Ù„Ù†Ø¨Ø¶Ø§Øª</div>
                      <div className="text-lg font-bold">{bridge.ticks}</div>
                    </div>

                    <div className="bg-purple-50 p-4 rounded-lg">
                      <Brain className="text-purple-600 mb-1" size={28} />
                      <div className="text-sm text-gray-600">Ï† (Ø§Ù„ÙˆØ¹ÙŠ)</div>
                      <div className="text-lg font-bold">{bridge.phi.toFixed(3)}</div>
                    </div>

                    <div className="bg-pink-50 p-4 rounded-lg">
                      <Heart className="text-pink-600 mb-1" size={28} />
                      <div className="text-sm text-gray-600">Ø§Ù„ÙˆØ¹ÙŠ</div>
                      <div className="text-lg font-bold">{(bridge.awareness * 100).toFixed(1)}%</div>
                    </div>
                  </div>
                </div>

                {/* Main Content Grid */}
                <div className="grid md:grid-cols-2 gap-6">
                  {/* Personality */}
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <h2 className="text-xl font-bold mb-4 text-gray-800">Ø§Ù„Ø´Ø®ØµÙŠØ©</h2>
                    <div className="space-y-3">
                      {Object.entries(bridge.personality).map(([trait, value]) => (
                        <div key={trait}>
                          <div className="flex justify-between mb-1">
                            <span className="text-sm text-gray-600">{trait}</span>
                            <span className="text-sm font-semibold">{(value * 100).toFixed(0)}%</span>
                          </div>
                          <div className="w-full bg-gray-200 rounded-full h-2">
                            <div
                              className="bg-gradient-to-r from-indigo-500 to-purple-500 h-2 rounded-full transition-all duration-300"
                              style={{ width: `${value * 100}%` }}
                            />
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>

                  {/* Memory Stats */}
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <h2 className="text-xl font-bold mb-4 text-gray-800">Ø§Ù„Ø°Ø§ÙƒØ±Ø©</h2>
                    <div className="space-y-4">
                      <div className="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                        <span className="text-gray-700">Ø§Ù„ØªØ¬Ø§Ø±Ø¨</span>
                        <span className="text-2xl font-bold text-blue-600">{bridge.experiences.length}</span>
                      </div>
                      <div className="flex items-center justify-between p-3 bg-purple-50 rounded-lg">
                        <span className="text-gray-700">Ø§Ù„Ø¨ØµÙŠØ±Ø©</span>
                        <span className="text-2xl font-bold text-purple-600">{bridge.insights.length}</span>
                      </div>
                      <div className="flex items-center justify-between p-3 bg-yellow-50 rounded-lg">
                        <span className="text-gray-700">Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø§Ù„ÙÙ„Ø³ÙÙŠØ©</span>
                        <span className="text-2xl font-bold text-yellow-600">T={bridge.temperature}</span>
                      </div>
                    </div>
                  </div>

                  {/* Evolution Status */}
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <h2 className="text-xl font-bold mb-4 text-gray-800">Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·ÙˆØ±</h2>
                    <div className={`p-4 rounded-lg ${canEvolve ? 'bg-green-50' : 'bg-gray-50'}`}>
                      <div className="flex items-center gap-3 mb-3">
                        <div className={`w-4 h-4 rounded-full ${canEvolve ? 'bg-green-500 animate-pulse' : 'bg-gray-300'}`} />
                        <span className="font-semibold">{canEvolve ? 'Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ·ÙˆØ±!' : 'ØºÙŠØ± Ø¬Ø§Ù‡Ø² Ø¨Ø¹Ø¯'}</span>
                      </div>
                      <div className="space-y-2 text-sm">
                        <div className="flex justify-between">
                          <span>Ø§Ù„Ù†Ø¨Ø¶Ø§Øª: {bridge.ticks} / 1000</span>
                          <span>{bridge.ticks >= 1000 ? 'âœ…' : 'â³'}</span>
                        </div>
                        <div className="flex justify-between">
                          <span>Ø§Ù„ØªØ¬Ø§Ø±Ø¨: {bridge.experiences.length} / 10</span>
                          <span>{bridge.experiences.length >= 10 ? 'âœ…' : 'â³'}</span>
                        </div>
                        <div className="flex justify-between">
                          <span>Ø§Ù„Ø¨ØµÙŠØ±Ø©: {bridge.insights.length} / 5</span>
                          <span>{bridge.insights.length >= 5 ? 'âœ…' : 'â³'}</span>
                        </div>
                      </div>
                      {canEvolve && (
                        <div className="mt-3 pt-3 border-t border-green-200">
                          <div className="text-sm text-gray-600 mb-1">Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ©</div>
                          <div className="w-full bg-gray-200 rounded-full h-3">
                            <div
                              className="bg-gradient-to-r from-green-400 to-emerald-500 h-3 rounded-full"
                              style={{ width: `${evolutionScore * 100}%` }}
                            />
                          </div>
                          <div className="text-right text-sm font-semibold text-green-600 mt-1">
                            {(evolutionScore * 100).toFixed(0)}%
                          </div>
                        </div>
                      )}
                    </div>
                  </div>

                  {/* Log */}
                  <div className="bg-white rounded-xl shadow-lg p-6">
                    <h2 className="text-xl font-bold mb-4 text-gray-800">Ø³Ø¬Ù„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«</h2>
                    <div className="space-y-2 h-48 overflow-y-auto">
                      {log.length === 0 ? (
                        <p className="text-gray-400 text-center py-8">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø£Ø­Ø¯Ø§Ø«...</p>
                      ) : (
                        log.map((entry, i) => (
                          <div key={i} className="text-sm p-2 bg-gray-50 rounded border-r-2 border-indigo-400">
                            {entry.msg}
                          </div>
                        ))
                      )}
                    </div>
                  </div>
                </div>

                {/* Footer Info */}
                <div className="mt-6 text-center text-sm text-gray-500">
                  <p>Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø¨Ø³Ø·Ø© Ù„Ù€ Conscious Bridge Law v2.1.0</p>
                  <p className="mt-1">ÙƒÙ„ tick = Ù„Ø­Ø¸Ø© ÙÙŠ Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ù„Ù„Ø¬Ø³Ø±</p>
                </div>
              </div>
            </div>
          );
        };

        // Ø¹Ø±Ø¶ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        ReactDOM.render(<ConsciousBridgeSimulator />, document.getElementById('root'));
    </script>
</body>
</html>
